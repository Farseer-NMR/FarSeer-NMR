language: python
dist: bionic
#python:
#  - "3.6"
#  - "3.7"
#  - "3.8"
#cache: false

#os:
#  - linux
#  - osx
#  - windows

# safelist
branches:
  only:
  - master

#env:
  #global:
    #- CC_TEST_REPORTER_ID=
# https://github.com/WeblateOrg/translation-finder/blob/master/.travis.yml#L20-L26

matrix: 
  inclue:
    - os: windows
      language: sh
      python: "3.8"
      env: 
        - TOXENV=py38,codecov
        #- SENDCOV=1
      before_install:
        - choco install python3 --params "/InstallDir:C:\\Python"
        - export PATH="/c/Python:/c/Python/Scripts:$PATH"
        - python -m pip install --upgrade pip wheel
    - os: windows
      language: sh
      python: "3.7"
      env:
        - TOXENV=py37,codecov
        #- SENDCOV=1
      before_install:
        - choco install python --version=3.7.6 pip --params "/InstallDir:C:\\Python"
        - export PATH="/c/Python:/c/Python/Scripts:$PATH"
        - curl https://bootstrap.pypa.io/get-pip.py -O get-pip.py
        - python get-pip.py
    - os: windows
      language: sh
      python: "3.6"
      env:
        - TOXENV=py36,codecov
        #- SENDCOV=1
      before_install:
        - choco install python --version=3.6.8 pip --params "/InstallDir:C:\\Python"
        - export PATH="/c/Python:/c/Python/Scripts:$PATH"
        - curl https://bootstrap.pypa.io/get-pip.py -O get-pip.py
        - python get-pip.py
    - os: linux
      python: "3.8"
      env: TOXENV=check
      before_install:
        - python -m pip install --upgrade pip wheel

#matrix:
#  include:
#    - os: linux
#      python: 3.8
#      env: TOXEN=check
#    - os: linux
#      python: 3.8
#      env: TOXEN=docs
#    - os: linux
#      python: 3.8
#      env: TOXEN=py38,codecov,coveralls
#    - os: linux
#      python: 3.7
#      env: TOXEN=py37,codecov,coveralls
#    - os: linux
#      python: 3.6
#      env: TOXEN=py36,codecov,coveralls
#    - os: osx
#      python: 3.8
#      env: TOXEN=check
#    - os: osx
#      python: 3.8
#      env: TOXEN=docs
#    - os: osx
#      python: 3.8
#      env: TOXEN=py38,codecov,coveralls
#    - os: osx
#      python: 3.7
#      env: TOXEN=py37,codecov,coveralls
#    - os: osx
#      python: 3.6
#      env: TOXEN=py36,codecov,coveralls
#    - os: windows
#      python: 3.8
#      env: TOXEN=check
#    - os: windows
#      python: 3.8
#      env: TOXEN=docs
#    - os: windows
#      python: 3.8
#      env: TOXEN=py38,codecov,coveralls
#    - os: windows
#      python: 3.7
#      env: TOXEN=py37,codecov,coveralls
#    - os: windows
#      python: 3.6
#      env: TOXEN=py36,codecov,coveralls
#
#before_install:
  #- chmod +x ./cc-test-reporter
  #- ./cc-test-reporter before-build

install:
  - python --version
  - python -m pip --version
 # - if [[ $SENDCOV ]]  
  #- curl -L https://codeclimate.com/downloads/test-reporter/test-reporter-latest-linux-amd64 > ./cc-test-reporter
  - pip install tox tox-venv
  - tox --version

script:
  - tox -v

#after_script:
    #- ./cc-test-reporter after-build --exit-code $TRAVIS_TEST_RESULT

after_failure:
  - more .tox/log/* | cat
  - more .tox/*/log/* | cat

notifications:
  email:
    on_success: never
    on_failure: always
